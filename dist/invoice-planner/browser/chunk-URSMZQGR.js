import{a as x}from"./chunk-2NYAIQSO.js";import{a as H}from"./chunk-XZ7YZGUI.js";import"./chunk-WH3ATHPE.js";import{c as M,d as c,f as R,g as j,j as N,k as A,l as L,o as T,s as k,u as ne}from"./chunk-AXPUYUO6.js";import{W as y}from"./chunk-ILEKMRCL.js";import{Ea as z,M as s,Q as m,S as v,T as D,Va as ie,Wa as E,X as u,_ as l,ab as re,e as $,ea as t,fa as e,ga as d,ka as te,la as h,lb as U,ma as S,nb as g,ob as oe,qb as X,t as w,va as r,wa as f,xa as P,y as Z,z as ee}from"./chunk-NOLPEQEU.js";var B=class o{constructor(i,n,a){this.route=i;this.router=n;this.prestationsService=a}prestation={};prestationId;ngOnInit(){this.prestationId=this.route.snapshot.paramMap.get("id"),this.prestationsService.getPrestationById(this.prestationId).subscribe(i=>{i&&(console.log(i),this.prestation=i)})}static \u0275fac=function(n){return new(n||o)(m(U),m(g),m(x))};static \u0275cmp=v({type:o,selectors:[["app-details-prestation"]],standalone:!1,decls:60,vars:5,consts:[[1,"pc-container"],[1,"pc-content"],[1,"page-header","mb-4"],[1,"page-block"],[1,"row","align-items-center"],[1,"col-md-12"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0"],[1,"breadcrumb-item"],["href","..\\dashboard\\index.html",1,"text-decoration-none"],[1,"ti","ti-home","me-1"],["href","javascript: void(0)",1,"text-decoration-none"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-md-12","mt-3"],[1,"mb-0","fw-bold"],[1,"row","justify-content-center","min-vh-100"],[1,"col-lg-8","col-md-10"],[1,"card","shadow-lg"],[1,"card-header","bg-primary","py-3"],[1,"fw-bold","text-white","mb-0","text-center"],[1,"ti","ti-file-description","me-2"],[1,"card-body","p-4"],[1,"mb-4","text-center"],[1,"text-primary","mb-3"],[1,"fs-5","text-dark","mb-0"],[1,"row","mb-4"],[1,"col-sm-6"],[1,"p-3","border","rounded","text-center"],[1,"text-primary","mb-2"],[1,"fs-4","fw-bold","mb-0"],[1,"mb-4"],[1,"p-3","bg-light","rounded"],[1,"mb-0"],[1,"card-footer","bg-light","p-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-primary","mb-0"],[1,"fs-3","fw-bold","text-success","mb-0"]],template:function(n,a){n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"nav",6)(7,"ol",7)(8,"li",8)(9,"a",9),d(10,"i",10),r(11,"Tableau de Bord "),e()(),t(12,"li",8)(13,"a",11),r(14,"Prestations"),e()(),t(15,"li",12),r(16,"D\xE9tails"),e()()()(),t(17,"div",13)(18,"h2",14),r(19,"D\xE9tails de la Prestation"),e()()()()(),t(20,"div",15)(21,"div",16)(22,"div",17)(23,"div",18)(24,"h3",19),d(25,"i",20),r(26,"D\xE9tails de la Prestation "),e()(),t(27,"div",21)(28,"div",22)(29,"h4",23),r(30,"D\xE9signation"),e(),t(31,"p",24),r(32),e()(),t(33,"div",25)(34,"div",26)(35,"div",27)(36,"h4",28),r(37,"Prix Unitaire"),e(),t(38,"p",29),r(39),e()()(),t(40,"div",26)(41,"div",27)(42,"h4",28),r(43,"Dur\xE9e"),e(),t(44,"p",29),r(45),t(46,"small"),r(47,"h"),e()()()()(),t(48,"div",30)(49,"h4",23),r(50,"Description"),e(),t(51,"div",31)(52,"p",32),r(53),e()()()(),t(54,"div",33)(55,"div",34)(56,"h4",35),r(57,"Prix Total"),e(),t(58,"p",36),r(59),e()()()()()()()()),n&2&&(s(32),f(a.prestation.designation),s(7),P("",a.prestation.prixUnitaire," XOF"),s(6),f(a.prestation.duree),s(8),f(a.prestation.description),s(6),P("",a.prestation.prixTotal," XOF"))},encapsulation:2})};var I=$(H());var me=o=>["/dashboard/prestations/details-prestation",o],le=o=>["/dashboard/prestations/edit",o];function pe(o,i){if(o&1){let n=te();t(0,"div",9)(1,"div",10)(2,"div",11)(3,"h5",12),r(4),e(),t(5,"p",13),r(6),e(),t(7,"p",14),r(8),e(),t(9,"div",15)(10,"button",16),r(11," D\xE9tails "),e(),t(12,"div")(13,"a",17),d(14,"i",18),e(),t(15,"a",19),h("click",function(){let p=Z(n).$implicit,b=S();return ee(b.deletePrestation(p.trackingId))}),d(16,"i",20),e()()()()()()}if(o&2){let n=i.$implicit;s(4),P(" ",n.designation," "),s(2),f(n.description),s(2),P("Prix : ",n.prixTotal," FCFA"),s(2),l("routerLink",z(5,me,n.trackingId)),s(3),l("routerLink",z(7,le,n.trackingId))}}function ce(o,i){o&1&&(t(0,"div",21),r(1," Aucune prestation disponible. "),e())}var O=class o{constructor(i,n,a){this.PrestationsService=i;this.router=n;this.messageService=a;this.getPrestations()}PrestationsResponse=[];getPrestations(){this.PrestationsService.findByCreatedBy().subscribe(i=>{i?(console.log(i),this.PrestationsResponse=i):(console.log(i),this.PrestationsResponse=i)})}addPrestation(){console.log("ici"),this.router.navigate(["dashboard/prestations/add-prestation"])}editPrestation(i){this.router.navigate([`dashboard/prestations/edit-prestation/${i}`])}detailPrestation(i){this.router.navigate([`dashboard/prestations/details-prestation/${i}`])}deletePrestation(i){I.default.fire({title:"\xCAtes-vous s\xFBr ?",text:"Vous voulez vraiment supprimer ce Prestation !",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Annuler",confirmButtonText:"Oui, le supprimer !"}).then(n=>{n.isConfirmed&&this.PrestationsService.deletePrestation(i).subscribe({next:a=>{a.message==="Prestation deleted successfully"?(this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Prestation supprim\xE9 avec succ\xE8s"}),this.PrestationsResponse=this.PrestationsResponse.filter(p=>p.trackingId!==i),I.default.fire({title:"Supprim\xE9 !",text:"Le Prestation a bien \xE9t\xE9 supprim\xE9.",icon:"success"})):I.default.fire({title:"Erreur",text:"Impossible de supprimer le Prestation pour l'instant, veuillez r\xE9essayer plus tard.",icon:"error"})},error:a=>{console.error("Erreur lors de la suppression du Prestation :",a),I.default.fire({title:"Erreur",text:"Une erreur est survenue lors de la suppression du Prestation.",icon:"error"})}})})}static \u0275fac=function(n){return new(n||o)(m(x),m(g),m(y))};static \u0275cmp=v({type:o,selectors:[["app-list-prestation"]],standalone:!1,decls:11,vars:2,consts:[[1,"pc-container"],[1,"pc-content"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-primary"],[1,"btn","btn-primary","d-flex","align-items-center",3,"click"],[1,"pi","pi-plus-circle","me-2"],[1,"row"],["class","col-md-6 col-lg-4 mb-4",4,"ngFor","ngForOf"],["class","text-center text-muted mt-3",4,"ngIf"],[1,"col-md-6","col-lg-4","mb-4"],[1,"card","shadow-sm"],[1,"card-body"],[1,"card-title","text-primary"],[1,"card-text","text-muted"],[1,"fw-bold"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn","btn-sm","btn-primary",3,"routerLink"],[1,"avtar","avtar-s","btn-link-success","btn-pc-default","me-2",3,"routerLink"],[1,"bx","bx-edit-alt","f-20"],[1,"avtar","avtar-s","btn-link-danger","btn-pc-default",3,"click"],[1,"bx","bx-trash-alt","f-20"],[1,"text-center","text-muted","mt-3"]],template:function(n,a){n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),r(4,"Liste des Prestations"),e(),t(5,"button",4),h("click",function(){return a.addPrestation()}),d(6,"i",5),r(7," Ajouter une prestation "),e()(),t(8,"div",6),u(9,pe,17,9,"div",7),e(),u(10,ce,2,0,"div",8),e()()),n&2&&(s(9),l("ngForOf",a.PrestationsResponse),s(),l("ngIf",a.PrestationsResponse.length===0))},dependencies:[ie,E,oe],encapsulation:2})};var W=$(H());function fe(o,i){o&1&&(t(0,"div",27),r(1,"designation requis"),e())}function ve(o,i){o&1&&(t(0,"div",27),r(1,"Description requise"),e())}function ge(o,i){o&1&&(t(0,"div",27),r(1,"Dur\xE9e requise"),e())}function xe(o,i){o&1&&(t(0,"div",27),r(1,"Prix unitaire invalide"),e())}function be(o,i){o&1&&(t(0,"div",28)(1,"span",29),r(2,"Chargement..."),e()())}function he(o,i){if(o&1&&(t(0,"div",30)(1,"div",29),r(2),e()()),o&2){let n=S();s(2),f(n.errorMessage)}}var q=class o{constructor(i,n,a,p){this.formBuilder=i;this.prestationsService=n;this.router=a;this.messageService=p}prestationForm;isLoading=!1;errorMessage="";ngOnInit(){this.initForm()}initForm(){this.prestationForm=this.formBuilder.group({designation:["",c.required],description:["",c.required],prixUnitaire:["",[c.pattern("^[0-9]+$")]],duree:["",[c.required,c.pattern("^[0-9]+$")]]})}onSubmit(){if(this.prestationForm.invalid){Object.keys(this.prestationForm.controls).forEach(a=>{this.prestationForm.get(a)?.markAsTouched()});return}this.isLoading=!0,this.errorMessage="";let i=this.prestationForm.value,n={designation:i.designation,description:i.description,duree:i.duree,prixUnitaire:i.prixUnitaire?i.prixUnitaire:void 0,prixTotal:i.prixTotal?i.prixTotal:void 0};this.prestationsService.createPrestation(n).subscribe({next:()=>{this.isLoading=!1,W.default.fire("Ajout r\xE9ussi","La prestation a \xE9t\xE9 ajout\xE9e avec succ\xE8s","success"),this.messageService.add({severity:"success",summary:"Ajout r\xE9ussi",detail:"Prestation ajout\xE9e"}),this.router.navigate(["/dashboard/prestations"])},error:a=>{this.isLoading=!1,W.default.fire("Erreur","Une erreur s'est produite","error"),console.error("Erreur API :",a),this.messageService.add({severity:"error",summary:"Erreur",detail:this.errorMessage})}})}static \u0275fac=function(n){return new(n||o)(m(k),m(x),m(g),m(y))};static \u0275cmp=v({type:o,selectors:[["app-add-prestation"]],standalone:!1,decls:48,vars:8,consts:[[1,"min-vh-100","bg-gradient","d-flex","align-items-center","justify-content-center","p-4",2,"background","linear-gradient(to right, #1976d2, #0d47a1)"],[1,"bg-white","rounded-4","shadow","p-5","w-100",2,"max-width","600px"],[1,"text-center","mb-4"],[1,"display-5","fw-bold","text-gradient"],[1,"text-muted"],[3,"ngSubmit","formGroup"],[1,"row","g-3","mb-3"],[1,"col-md-6"],["for","designation",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"ph-duotone","ph-tag"],["id","designation","type","text","formControlName","designation","placeholder","designation de la prestation",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["for","description",1,"form-label"],[1,"ph-duotone","ph-scroll"],["id","description","type","text","formControlName","description","placeholder","Description de la prestation",1,"form-control"],["for","duree",1,"form-label"],[1,"ph-duotone","ph-clock"],["id","duree","type","text","formControlName","duree","placeholder","Dur\xE9e en H",1,"form-control"],["for","prixUnitaire",1,"form-label"],[1,"ph-duotone","ph-currency-dollar"],["id","prixUnitaire","type","number","formControlName","prixUnitaire","placeholder","Prix unitaire",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100","mb-3",3,"disabled"],[1,"ph-duotone","ph-user-plus","me-2"],["class","alert alert-info d-flex align-items-center mt-3",4,"ngIf"],["class","alert alert-danger d-flex align-items-center mt-3",4,"ngIf"],[1,"text-danger","small","mt-1"],[1,"alert","alert-info","d-flex","align-items-center","mt-3"],[1,"ms-2"],[1,"alert","alert-danger","d-flex","align-items-center","mt-3"]],template:function(n,a){if(n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),r(4,"Ajout Prestation"),e(),t(5,"p",4),r(6,"Ajoutez une nouvelle prestation"),e()(),t(7,"form",5),h("ngSubmit",function(){return a.onSubmit()}),t(8,"div",6)(9,"div",7)(10,"label",8),r(11,"designation"),e(),t(12,"div",9)(13,"span",10),d(14,"i",11),e(),d(15,"input",12),e(),u(16,fe,2,0,"div",13),e(),t(17,"div",7)(18,"label",14),r(19,"Description"),e(),t(20,"div",9)(21,"span",10),d(22,"i",15),e(),d(23,"input",16),e(),u(24,ve,2,0,"div",13),e()(),t(25,"div",6)(26,"div",7)(27,"label",17),r(28,"Dur\xE9e de la prestation"),e(),t(29,"div",9)(30,"span",10),d(31,"i",18),e(),d(32,"input",19),e(),u(33,ge,2,0,"div",13),e(),t(34,"div",7)(35,"label",20),r(36,"Prix Unitaire"),e(),t(37,"div",9)(38,"span",10),d(39,"i",21),e(),d(40,"input",22),e(),u(41,xe,2,0,"div",13),e()(),t(42,"button",23),d(43,"i",24),t(44,"span"),r(45,"Cr\xE9er la prestation"),e()(),u(46,be,3,0,"div",25)(47,he,3,1,"div",26),e()()()),n&2){let p,b,_,F;s(7),l("formGroup",a.prestationForm),s(9),l("ngIf",((p=a.prestationForm.get("designation"))==null?null:p.invalid)&&((p=a.prestationForm.get("designation"))==null?null:p.touched)),s(8),l("ngIf",((b=a.prestationForm.get("description"))==null?null:b.invalid)&&((b=a.prestationForm.get("description"))==null?null:b.touched)),s(9),l("ngIf",((_=a.prestationForm.get("duree"))==null?null:_.invalid)&&((_=a.prestationForm.get("duree"))==null?null:_.touched)),s(8),l("ngIf",((F=a.prestationForm.get("prixUnitaire"))==null?null:F.invalid)&&((F=a.prestationForm.get("prixUnitaire"))==null?null:F.touched)),s(),l("disabled",a.prestationForm.invalid),s(4),l("ngIf",a.isLoading),s(),l("ngIf",a.errorMessage)}},dependencies:[E,N,M,A,R,j,L,T],encapsulation:2})};var Y=$(H());function Se(o,i){o&1&&(t(0,"div",26)(1,"span",27),r(2,"Mise \xE0 jour en cours..."),e()())}function Pe(o,i){if(o&1&&(t(0,"div",28)(1,"div",27),r(2),e()()),o&2){let n=S();s(2),f(n.errorMessage)}}var V=class o{constructor(i,n,a,p,b){this.route=i;this.router=n;this.fb=a;this.prestationsService=p;this.messageService=b}prestationForm;prestationId;isLoading=!1;errorMessage="";ngOnInit(){this.prestationId=this.route.snapshot.paramMap.get("id"),this.prestationForm=this.fb.group({designation:["",c.required],description:["",c.required],prixUnitaire:["",[c.required,c.pattern("^[0-9]+$")]],duree:["",[c.required,c.pattern("^[0-9]+$")]]}),this.prestationsService.getPrestationById(this.prestationId).subscribe(i=>{i&&(console.log(i),this.prestationForm.patchValue(i))})}onUpdate(){if(this.prestationForm.invalid)return;this.isLoading=!0;let i=this.prestationForm.value;i.prixUnitaire=this.prestationForm.get("prixUnitaire")?.value,this.prestationsService.updatePrestation(this.prestationId,i).subscribe({next:()=>{this.isLoading=!1,Y.default.fire({title:"Modification r\xE9ussie",text:"La prestation a \xE9t\xE9 modifi\xE9e avec succ\xE8s",icon:"success",draggable:!0}),this.messageService.add({severity:"success",summary:"Modification r\xE9ussie",detail:"La prestation a \xE9t\xE9 modifi\xE9e avec succ\xE8s"}),this.router.navigate(["/dashboard/prestations"])},error:n=>{this.isLoading=!1,Y.default.fire({title:"Erreur",text:"Une erreur s'est produite lors de la modification de la prestation",icon:"error"}),console.error("Erreur API :",n),this.messageService.add({severity:"error",summary:"Erreur",detail:"Une erreur s'est produite"})}})}static \u0275fac=function(n){return new(n||o)(m(U),m(g),m(k),m(x),m(y))};static \u0275cmp=v({type:o,selectors:[["app-edit-prestation"]],standalone:!1,decls:44,vars:3,consts:[[1,"min-vh-100","bg-gradient","d-flex","align-items-center","justify-content-center","p-4",2,"background","linear-gradient(to right, #1976d2, #0d47a1)"],[1,"bg-white","rounded-4","shadow","p-5","w-100",2,"max-width","600px"],[1,"text-center","mb-4"],[1,"display-5","fw-bold","text-gradient"],[1,"text-muted"],[3,"ngSubmit","formGroup"],[1,"row","g-3","mb-3"],[1,"col-md-6"],["for","designation",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"ph-duotone","ph-tag"],["id","designation","type","text","formControlName","designation","placeholder","designation",1,"form-control"],["for","description",1,"form-label"],[1,"ph-duotone","ph-scroll"],["id","description","type","text","formControlName","description","placeholder","Description de la prestation",1,"form-control"],["for","duree",1,"form-label"],[1,"ph-duotone","ph-clock"],["id","duree","type","text","formControlName","duree","placeholder","Dur\xE9e de la prestation",1,"form-control"],["for","prixUnitaire",1,"form-label"],[1,"ph-duotone","ph-currency-dollar"],["id","prixUnitaire","type","number","formControlName","prixUnitaire","placeholder","Prix unitaire",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100","mb-3"],[1,"ph-duotone","ph-user-check","me-2"],["class","alert alert-info d-flex align-items-center mt-3",4,"ngIf"],["class","alert alert-danger d-flex align-items-center mt-3",4,"ngIf"],[1,"alert","alert-info","d-flex","align-items-center","mt-3"],[1,"ms-2"],[1,"alert","alert-danger","d-flex","align-items-center","mt-3"]],template:function(n,a){n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),r(4,"Modifier Prestation"),e(),t(5,"p",4),r(6,"Mettez \xE0 jour les informations de la Prestation"),e()(),t(7,"form",5),h("ngSubmit",function(){return a.onUpdate()}),t(8,"div",6)(9,"div",7)(10,"label",8),r(11,"designation"),e(),t(12,"div",9)(13,"span",10),d(14,"i",11),e(),d(15,"input",12),e()(),t(16,"div",7)(17,"label",13),r(18,"Description"),e(),t(19,"div",9)(20,"span",10),d(21,"i",14),e(),d(22,"input",15),e()()(),t(23,"div",6)(24,"div",7)(25,"label",16),r(26,"Dur\xE9e"),e(),t(27,"div",9)(28,"span",10),d(29,"i",17),e(),d(30,"input",18),e()(),t(31,"div",7)(32,"label",19),r(33,"Prix Unitaire"),e(),t(34,"div",9)(35,"span",10),d(36,"i",20),e(),d(37,"input",21),e()()(),t(38,"button",22),d(39,"i",23),t(40,"span"),r(41,"Mettre \xE0 jour"),e()(),u(42,Se,3,0,"div",24)(43,Pe,3,1,"div",25),e()()()),n&2&&(s(7),l("formGroup",a.prestationForm),s(35),l("ngIf",a.isLoading),s(),l("ngIf",a.errorMessage))},dependencies:[E,N,M,A,R,j,L,T],encapsulation:2})};var Ee=[{path:"",component:O},{path:"add-prestation",component:q},{path:"edit/:id",component:V},{path:"details-prestation/:id",component:B}],G=class o{static \u0275fac=function(n){return new(n||o)};static \u0275mod=D({type:o});static \u0275inj=w({imports:[X.forChild(Ee),X]})};var de=class o{static \u0275fac=function(n){return new(n||o)};static \u0275mod=D({type:o});static \u0275inj=w({imports:[re,G,ne]})};export{de as PrestationsModule};
