import{a as j,b as Z,c as $,d as ee,e as te,f as ne}from"./chunk-X47Y2LB4.js";import"./chunk-4WB3XNKJ.js";import{k as X}from"./chunk-G56B72LT.js";import"./chunk-F2X3VGZZ.js";import{a as W}from"./chunk-4XYTC4J5.js";import"./chunk-G6V6HJYU.js";import{b as H,c as P,d as p,f as O,g as F,j as k,l as I,o as T,s as L,t as J,u as K}from"./chunk-DY3BU5YN.js";import{W as Y}from"./chunk-R3DGKUZX.js";import{$ as t,H as m,L as u,N as C,O as M,S as d,V as s,Wa as S,aa as e,ba as l,bb as U,ga as y,ha as w,mb as Q,o as b,ob as N,pb as R,ra as i,rb as V,sa as E}from"./chunk-NRBLYFRS.js";import{g as G}from"./chunk-VOSPIT4N.js";var ie=G(W());function de(n,a){n&1&&(t(0,"div",29),i(1,"Email invalide"),e())}function pe(n,a){n&1&&(t(0,"div",29),i(1,"Mot de passe requis"),e())}function ce(n,a){n&1&&l(0,"i",30)}function ge(n,a){n&1&&(t(0,"span"),i(1,"Se connecter"),e())}function ue(n,a){n&1&&l(0,"box-icon",31)}function fe(n,a){if(n&1&&(t(0,"div",32),l(1,"i",33),t(2,"div"),i(3),e()()),n&2){let o=w();m(3),E(o.errorMessage)}}var A=class n{constructor(a,o,r,c,g){this.formBuilder=a;this.authService=o;this.router=r;this.route=c;this.messageService=g}loginForm;isLoading=!1;errorMessage="";returnUrl="/";ngOnInit(){this.initForm(),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/dashboard"}initForm(){this.loginForm=this.formBuilder.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]})}onSubmit(){if(this.loginForm.invalid)return;this.isLoading=!0,this.errorMessage="";let a={email:this.loginForm.get("email")?.value,password:this.loginForm.get("password")?.value};this.authService.login(a).subscribe({next:o=>{this.isLoading=!1,o.error?this.showErrorAlert(o.message):(this.messageService.add({severity:"success",summary:"Connexion r\xE9ussie",detail:"Vous \xEAtes maintenant connect\xE9",life:3e3}),setTimeout(()=>{this.router.navigate([this.returnUrl])},3e3))},error:o=>{this.isLoading=!1;let r=o.error?.message||"Une erreur s'est produite lors de la connexion";this.showErrorAlert(r)}})}showErrorAlert(a){ie.default.fire({icon:"error",title:"Erreur de connexion",text:a,confirmButtonColor:"#d33"})}static \u0275fac=function(o){return new(o||n)(u(L),u(j),u(N),u(Q),u(Y))};static \u0275cmp=C({type:n,selectors:[["app-login"]],standalone:!1,decls:43,vars:8,consts:[[1,"min-vh-100","bg-gradient","d-flex","align-items-center","justify-content-center","p-4",2,"background","linear-gradient(to right, #1976d2, #0d47a1)"],[1,"bg-white","rounded-4","shadow","p-5","w-100",2,"max-width","500px"],[1,"text-center","mb-4"],[1,"display-5","fw-bold","text-gradient"],[1,"text-muted"],[3,"ngSubmit","formGroup"],[1,"h3","fw-semibold","mb-4"],[1,"mb-3"],["for","email",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"ph-duotone","ph-envelope-simple"],["id","email","type","email","formControlName","email","placeholder","Votre email",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["for","password",1,"form-label"],[1,"ph-duotone","ph-lock"],["id","password","type","password","formControlName","password","placeholder","Votre mot de passe",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"form-check"],["type","checkbox","id","remember",1,"form-check-input"],["for","remember",1,"form-check-label"],["routerLink","/auth/forgot-password",1,"text-primary"],["type","submit",1,"btn","btn-primary","w-100","mb-3",3,"disabled"],["class","ph-duotone ph-sign-in me-2",4,"ngIf"],[4,"ngIf"],["name","loader","animation","spin","color","#ffffff",4,"ngIf"],[1,"text-center"],["routerLink","/auth/register",1,"text-primary","ms-1"],["class","alert alert-danger d-flex align-items-center mt-3",4,"ngIf"],[1,"text-danger","small","mt-1"],[1,"ph-duotone","ph-sign-in","me-2"],["name","loader","animation","spin","color","#ffffff"],[1,"alert","alert-danger","d-flex","align-items-center","mt-3"],[1,"ph-duotone","ph-exclamation-triangle","me-2"]],template:function(o,r){if(o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),i(4,"InvoicePlanner"),e(),t(5,"p",4),i(6,"Simplifiez votre facturation"),e()(),t(7,"form",5),y("ngSubmit",function(){return r.onSubmit()}),t(8,"h2",6),i(9,"Connexion"),e(),t(10,"div",7)(11,"label",8),i(12,"Email"),e(),t(13,"div",9)(14,"span",10),l(15,"i",11),e(),l(16,"input",12),e(),d(17,de,2,0,"div",13),e(),t(18,"div",7)(19,"label",14),i(20,"Mot de passe"),e(),t(21,"div",9)(22,"span",10),l(23,"i",15),e(),l(24,"input",16),e(),d(25,pe,2,0,"div",13),e(),t(26,"div",17)(27,"div",18),l(28,"input",19),t(29,"label",20),i(30,"Se souvenir de moi"),e()(),t(31,"a",21),i(32,"Mot de passe oubli\xE9?"),e()(),t(33,"button",22),d(34,ce,1,0,"i",23)(35,ge,2,0,"span",24)(36,ue,1,0,"box-icon",25),e(),t(37,"div",26)(38,"span",4),i(39,"Pas encore de compte?"),e(),t(40,"a",27),i(41,"Cr\xE9er un compte"),e()(),d(42,fe,4,1,"div",28),e()()()),o&2){let c,g;m(7),s("formGroup",r.loginForm),m(10),s("ngIf",((c=r.loginForm.get("email"))==null?null:c.invalid)&&((c=r.loginForm.get("email"))==null?null:c.touched)),m(8),s("ngIf",((g=r.loginForm.get("password"))==null?null:g.invalid)&&((g=r.loginForm.get("password"))==null?null:g.touched)),m(8),s("disabled",r.loginForm.invalid||r.isLoading),m(),s("ngIf",!r.isLoading),m(),s("ngIf",!r.isLoading),m(),s("ngIf",r.isLoading),m(6),s("ngIf",r.errorMessage)}},dependencies:[S,R,k,P,O,F,I,T],styles:["[_ngcontent-%COMP%]:root{--primary-color: #1976d2;--primary-dark: #0d47a1;--primary-light: #64b5f6;--text-color: #333;--text-light: #666;--background-light: #f8f9fa;--white: #ffffff;--shadow: 0 4px 6px rgba(0, 0, 0, .1);--error-color: #f44336}.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,var(--primary-light),var(--primary-color));padding:20px}.login-card[_ngcontent-%COMP%]{background-color:var(--white);border-radius:8px;box-shadow:var(--shadow);width:100%;max-width:450px;padding:40px;animation:_ngcontent-%COMP%_fadeIn .5s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.logo-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.logo-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--primary-dark);margin-bottom:5px;font-size:2rem}.logo-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1rem}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-dark);font-size:1.5rem;margin-bottom:25px;text-align:center}.field[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:var(--text-color);font-weight:500}.p-input-icon-left[_ngcontent-%COMP%]{width:100%}.p-input-icon-left[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--text-light)}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:var(--error-color)}.p-error[_ngcontent-%COMP%]{color:var(--error-color);font-size:.85rem;margin-top:5px;display:block}.remember-forgot[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px}.field-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center}.forgot-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-size:.9rem;transition:color .3s ease}.forgot-link[_ngcontent-%COMP%]:hover{color:var(--primary-dark);text-decoration:underline}.button-container[_ngcontent-%COMP%]{margin-bottom:20px}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:20px;color:var(--text-light);font-size:.9rem}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;margin-left:5px;transition:color .3s ease}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-dark);text-decoration:underline}@media (max-width: 576px){.login-card[_ngcontent-%COMP%]{padding:30px 20px}.remember-forgot[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.forgot-link[_ngcontent-%COMP%]{margin-top:10px}}"]})};var f=G(W());function he(n,a){n&1&&(t(0,"div",37),i(1,"Pr\xE9nom requis"),e())}function ve(n,a){n&1&&(t(0,"div",37),i(1,"Nom requis"),e())}function xe(n,a){n&1&&(t(0,"div",37),i(1,"Email invalide"),e())}function _e(n,a){n&1&&(t(0,"div",37),i(1,"Mot de passe requis (6 caract\xE8res minimum)"),e())}function be(n,a){n&1&&(t(0,"div",37),i(1,"Confirmation du mot de passe requise"),e())}function Ce(n,a){n&1&&(t(0,"div",37),i(1,"Les mots de passe ne correspondent pas"),e())}function Me(n,a){n&1&&(t(0,"div",37),i(1,"Vous devez accepter les termes et conditions"),e())}function ye(n,a){n&1&&l(0,"box-icon",40)}function we(n,a){if(n&1&&(t(0,"div",38),d(1,ye,1,0,"box-icon",39),t(2,"div"),i(3),e()()),n&2){let o=w();m(),s("ngIf",o.isLoading),m(2),E(o.errorMessage)}}var D=class n{constructor(a,o,r){this.formBuilder=a;this.authService=o;this.router=r}registerForm;isLoading=!1;errorMessage="";passwordsNotMatching=!1;ngOnInit(){this.initForm()}initForm(){this.registerForm=this.formBuilder.group({prenom:["",[p.required]],nom:["",[p.required]],email:["",[p.required,p.email]],numeroDeTelephone:[""],password:["",[p.required,p.minLength(6)]],confirmPassword:["",[p.required]],acceptTerms:[!1,[p.requiredTrue]]}),this.registerForm.get("confirmPassword")?.valueChanges.subscribe(()=>{this.checkPasswordsMatch()}),this.registerForm.get("password")?.valueChanges.subscribe(()=>{this.registerForm.get("confirmPassword")?.value&&this.checkPasswordsMatch()})}checkPasswordsMatch(){let a=this.registerForm.get("password")?.value,o=this.registerForm.get("confirmPassword")?.value;this.passwordsNotMatching=a!==o}onSubmit(){if(this.registerForm.invalid||this.passwordsNotMatching){Object.keys(this.registerForm.controls).forEach(o=>{this.registerForm.get(o)?.markAsTouched()}),f.default.fire({icon:"error",title:"Erreur",text:"Veuillez remplir correctement tous les champs du formulaire."});return}this.isLoading=!0,this.errorMessage="";let a={prenom:this.registerForm.get("prenom")?.value,nom:this.registerForm.get("nom")?.value,email:this.registerForm.get("email")?.value,password:this.registerForm.get("password")?.value,confirmPassword:this.registerForm.get("confirmPassword")?.value,numeroDeTelephone:this.registerForm.get("numeroDeTelephone")?.value||void 0};this.authService.register(a).subscribe({next:o=>{this.isLoading=!1,o.error?(this.errorMessage="Une erreur s'est produite lors de l'inscription",f.default.fire({icon:"error",title:"Erreur d'inscription",text:this.errorMessage}),console.error(o.error)):f.default.fire({icon:"success",title:"Inscription r\xE9ussie",text:"Votre compte a \xE9t\xE9 cr\xE9\xE9 avec succ\xE8s ! Un lien d'activation vous a \xE9t\xE9 envoy\xE9 \xE0 votre email.",confirmButtonText:"OK"}).then(()=>{this.router.navigate(["/auth"])})},error:o=>{this.isLoading=!1,console.error(o.error?.message),this.errorMessage="Une erreur s'est produite lors de l'inscription",f.default.fire({icon:"error",title:"Erreur d'inscription",text:this.errorMessage})}})}static \u0275fac=function(o){return new(o||n)(u(L),u(j),u(N))};static \u0275cmp=C({type:n,selectors:[["app-register"]],standalone:!1,decls:78,vars:10,consts:[[1,"min-vh-100","bg-gradient","d-flex","align-items-center","justify-content-center","p-4",2,"background","linear-gradient(to right, #1976d2, #0d47a1)"],[1,"bg-white","rounded-4","shadow","p-5","w-100",2,"max-width","600px"],[1,"text-center","mb-4"],[1,"display-5","fw-bold","text-gradient"],[1,"text-muted"],[3,"ngSubmit","formGroup"],[1,"h3","fw-semibold","mb-4"],[1,"row","g-3","mb-3"],[1,"col-md-6"],["for","prenom",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"ph-duotone","ph-user"],["id","prenom","type","text","formControlName","prenom","placeholder","Votre pr\xE9nom",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["for","nom",1,"form-label"],["id","nom","type","text","formControlName","nom","placeholder","Votre nom",1,"form-control"],["for","email",1,"form-label"],[1,"ph-duotone","ph-envelope-simple"],["id","email","type","email","formControlName","email","placeholder","Votre email",1,"form-control"],["for","numeroDeTelephone",1,"form-label"],[1,"ph-duotone","ph-phone"],["id","numeroDeTelephone","type","tel","formControlName","numeroDeTelephone","placeholder","Votre num\xE9ro de t\xE9l\xE9phone",1,"form-control"],["for","password",1,"form-label"],[1,"ph-duotone","ph-lock"],["id","password","type","password","formControlName","password","placeholder","Votre mot de passe",1,"form-control"],["for","confirmPassword",1,"form-label"],["id","confirmPassword","type","password","formControlName","confirmPassword","placeholder","Confirmez votre mot de passe",1,"form-control"],[1,"mb-3","form-check"],["type","checkbox","id","acceptTerms","formControlName","acceptTerms",1,"form-check-input"],["for","acceptTerms",1,"form-check-label"],["href","#",1,"text-primary"],["type","submit",1,"btn","btn-primary","w-100","mb-3",3,"disabled"],[1,"ph-duotone","ph-user-plus","me-2"],[1,"text-center"],["routerLink","/auth",1,"text-primary","ms-1"],["class","alert alert-danger d-flex align-items-center mt-3",4,"ngIf"],[1,"text-danger","small","mt-1"],[1,"alert","alert-danger","d-flex","align-items-center","mt-3"],["name","loader","animation","spin","color","#ffffff",4,"ngIf"],["name","loader","animation","spin","color","#ffffff"]],template:function(o,r){if(o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),i(4,"InvoicePlanner"),e(),t(5,"p",4),i(6,"Simplifiez votre facturation"),e()(),t(7,"form",5),y("ngSubmit",function(){return r.onSubmit()}),t(8,"h2",6),i(9,"Cr\xE9er un compte"),e(),t(10,"div",7)(11,"div",8)(12,"label",9),i(13,"Pr\xE9nom"),e(),t(14,"div",10)(15,"span",11),l(16,"i",12),e(),l(17,"input",13),e(),d(18,he,2,0,"div",14),e(),t(19,"div",8)(20,"label",15),i(21,"Nom"),e(),t(22,"div",10)(23,"span",11),l(24,"i",12),e(),l(25,"input",16),e(),d(26,ve,2,0,"div",14),e()(),t(27,"div",7)(28,"div",8)(29,"label",17),i(30,"Email"),e(),t(31,"div",10)(32,"span",11),l(33,"i",18),e(),l(34,"input",19),e(),d(35,xe,2,0,"div",14),e(),t(36,"div",8)(37,"label",20),i(38,"Num\xE9ro de t\xE9l\xE9phone (optionnel)"),e(),t(39,"div",10)(40,"span",11),l(41,"i",21),e(),l(42,"input",22),e()()(),t(43,"div",7)(44,"div",8)(45,"label",23),i(46,"Mot de passe"),e(),t(47,"div",10)(48,"span",11),l(49,"i",24),e(),l(50,"input",25),e(),d(51,_e,2,0,"div",14),e(),t(52,"div",8)(53,"label",26),i(54,"Confirmer le mot de passe"),e(),t(55,"div",10)(56,"span",11),l(57,"i",24),e(),l(58,"input",27),e(),d(59,be,2,0,"div",14)(60,Ce,2,0,"div",14),e()(),t(61,"div",28),l(62,"input",29),t(63,"label",30),i(64," J'accepte les "),t(65,"a",31),i(66,"termes et conditions"),e()(),d(67,Me,2,0,"div",14),e(),t(68,"button",32),l(69,"i",33),t(70,"span"),i(71,"S'inscrire"),e()(),t(72,"div",34)(73,"span",4),i(74,"D\xE9j\xE0 un compte?"),e(),t(75,"a",35),i(76,"Se connecter"),e()(),d(77,we,4,2,"div",36),e()()()),o&2){let c,g,h,v,x,B,_;m(7),s("formGroup",r.registerForm),m(11),s("ngIf",((c=r.registerForm.get("prenom"))==null?null:c.invalid)&&((c=r.registerForm.get("prenom"))==null?null:c.touched)),m(8),s("ngIf",((g=r.registerForm.get("nom"))==null?null:g.invalid)&&((g=r.registerForm.get("nom"))==null?null:g.touched)),m(9),s("ngIf",((h=r.registerForm.get("email"))==null?null:h.invalid)&&((h=r.registerForm.get("email"))==null?null:h.touched)),m(16),s("ngIf",((v=r.registerForm.get("password"))==null?null:v.invalid)&&((v=r.registerForm.get("password"))==null?null:v.touched)),m(8),s("ngIf",((x=r.registerForm.get("confirmPassword"))==null?null:x.invalid)&&((x=r.registerForm.get("confirmPassword"))==null?null:x.touched)),m(),s("ngIf",r.passwordsNotMatching&&((B=r.registerForm.get("confirmPassword"))==null?null:B.touched)),m(7),s("ngIf",((_=r.registerForm.get("acceptTerms"))==null?null:_.invalid)&&((_=r.registerForm.get("acceptTerms"))==null?null:_.touched)),m(),s("disabled",r.registerForm.invalid||r.isLoading),m(9),s("ngIf",r.errorMessage)}},dependencies:[S,R,k,P,H,O,F,I,T],styles:["[_ngcontent-%COMP%]:root{--primary-color: #1976d2;--primary-dark: #0d47a1;--primary-light: #64b5f6;--text-color: #333;--text-light: #666;--background-light: #f8f9fa;--white: #ffffff;--shadow: 0 4px 6px rgba(0, 0, 0, .1);--error-color: #f44336}.register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,var(--primary-light),var(--primary-color));padding:20px}.register-card[_ngcontent-%COMP%]{background-color:var(--white);border-radius:8px;box-shadow:var(--shadow);width:100%;max-width:600px;padding:40px;animation:_ngcontent-%COMP%_fadeIn .5s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.logo-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.logo-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--primary-dark);margin-bottom:5px;font-size:2rem}.logo-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-light);font-size:1rem}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary-dark);font-size:1.5rem;margin-bottom:25px;text-align:center}.p-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:0 -10px}.p-col-12[_ngcontent-%COMP%]{width:100%;padding:0 10px}.p-md-6[_ngcontent-%COMP%]{width:50%}.field[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:var(--text-color);font-weight:500}.p-input-icon-left[_ngcontent-%COMP%]{width:100%}.p-input-icon-left[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--text-light)}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:var(--error-color)}.p-error[_ngcontent-%COMP%]{color:var(--error-color);font-size:.85rem;margin-top:5px;display:block}.field-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.terms-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;transition:color .3s ease}.terms-link[_ngcontent-%COMP%]:hover{color:var(--primary-dark);text-decoration:underline}.button-container[_ngcontent-%COMP%]{margin-bottom:20px}.login-link[_ngcontent-%COMP%]{text-align:center;margin-top:20px;color:var(--text-light);font-size:.9rem}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:500;margin-left:5px;transition:color .3s ease}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary-dark);text-decoration:underline}@media (max-width: 768px){.p-md-6[_ngcontent-%COMP%]{width:100%}}@media (max-width: 576px){.register-card[_ngcontent-%COMP%]{padding:30px 20px}}"]})};var Ee=[{path:"",component:A},{path:"register",component:D}],q=class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=M({type:n});static \u0275inj=b({imports:[V.forChild(Ee),V]})};var re=class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=M({type:n});static \u0275inj=b({imports:[U,q,K,J,X,Z,$,ee,te,ne]})};export{re as AuthModule};
