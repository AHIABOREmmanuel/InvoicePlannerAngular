import{a as L}from"./chunk-MTXOG7JB.js";import{a as se}from"./chunk-4XYTC4J5.js";import"./chunk-G6V6HJYU.js";import{c as N,d as h,f as j,g as q,i as ye,j as G,k as z,l as $,o as X,s as W,t as Pe,u as Ce}from"./chunk-DY3BU5YN.js";import{W as A}from"./chunk-R3DGKUZX.js";import{$ as t,$a as B,Aa as g,Ba as k,Ga as P,H as s,Ia as re,Ja as oe,Ka as D,L as v,N as C,O as R,Q as ge,S as p,V as d,Va as Ee,Wa as I,aa as e,ab as Se,ba as l,bb as O,fa as S,ga as b,ha as c,ka as be,mb as H,o as M,ob as w,pb as F,ra as i,rb as ae,sa as x,t as _,ta as y,u as E,ua as ne,wa as xe,xa as he,ya as _e}from"./chunk-NRBLYFRS.js";import{g as ie}from"./chunk-VOSPIT4N.js";var Me=()=>["/dashboard"],le=()=>["/dashboard/prestations"],Re=r=>["/dashboard/prestations/edit",r];function De(r,o){if(r&1&&(t(0,"a",18),l(1,"i",19),i(2,"Modifier "),e()),r&2){let n=c();d("routerLink",k(1,Re,n.prestation.trackingId))}}function Ae(r,o){r&1&&(t(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23)(4,"div",24)(5,"span",25),i(6,"Chargement..."),e()(),t(7,"p",26),i(8,"Chargement des donn\xE9es de la prestation..."),e()()()()())}function Ne(r,o){if(r&1){let n=S();t(0,"div",20)(1,"div",21)(2,"div",27)(3,"div",28)(4,"div",29),l(5,"i",30),e(),t(6,"h4",31),i(7),e(),t(8,"p",32),i(9,"Veuillez r\xE9essayer ou contacter l'administrateur si le probl\xE8me persiste."),e(),t(10,"div",33)(11,"button",34),b("click",function(){_(n);let m=c();return E(m.refreshData())}),l(12,"i",35),i(13,"R\xE9essayer "),e(),t(14,"a",36),l(15,"i",37),i(16,"Liste des prestations "),e()()()()()()}if(r&2){let n=c();s(7),x(n.error),s(7),d("routerLink",g(2,le))}}function je(r,o){if(r&1&&(t(0,"div",20)(1,"div",38)(2,"div",39)(3,"div",40)(4,"div",41)(5,"h3",42),l(6,"i",43),i(7),e(),t(8,"span",44),i(9),P(10,"currency"),e()()(),t(11,"div",45)(12,"div",46)(13,"div",47)(14,"div",48)(15,"h4",49),l(16,"i",50),i(17,"Prix Unitaire"),e(),t(18,"p",51),i(19),P(20,"currency"),e()()(),t(21,"div",47)(22,"div",48)(23,"h4",49),l(24,"i",52),i(25,"Dur\xE9e"),e(),t(26,"p",51),i(27),t(28,"small"),i(29,"heures"),e()()()()(),t(30,"div",53)(31,"div",54)(32,"h5",32),l(33,"i",55),i(34,"Description"),e()(),t(35,"div",56)(36,"p",57),i(37),e()()(),t(38,"div",58)(39,"div",54)(40,"h5",32),l(41,"i",59),i(42,"Statistiques d'utilisation"),e()(),t(43,"div",56)(44,"div",60)(45,"div",61)(46,"div",62)(47,"div",63)(48,"h3",64),i(49,"0"),e(),t(50,"p",32),i(51,"Factures"),e()()()(),t(52,"div",61)(53,"div",65)(54,"div",63)(55,"h3",66),i(56,"0"),e(),t(57,"p",32),i(58,"Devis"),e()()()(),t(59,"div",61)(60,"div",67)(61,"div",63)(62,"h3",68),i(63,"0"),e(),t(64,"p",32),i(65,"Contrats"),e()()()()()()()(),t(66,"div",69)(67,"div",41)(68,"h4",70),i(69,"Prix Total"),e(),t(70,"p",71),i(71),e()()()()()()),r&2){let n=c();s(7),y("",n.prestation.designation," "),s(2),x(D(10,6,n.prestation.prixUnitaire,"XOF","symbol","1.0-0")),s(10),x(D(20,11,n.prestation.prixUnitaire,"XOF","symbol","1.0-0")),s(8),y("",n.prestation.duree," "),s(10),x(n.prestation.description),s(34),y("",n.prestation.prixTotal," XOF")}}var J=class r{constructor(o,n,a){this.route=o;this.router=n;this.prestationsService=a}prestation={};prestationId;loading=!1;error=null;ngOnInit(){this.prestationId=this.route.snapshot.paramMap.get("id"),this.prestationsService.getPrestationById(this.prestationId).subscribe(o=>{o&&(console.log(o),this.loading=!1,this.error=null,this.prestation=o)},o=>{this.loading=!1,this.error=o.message})}static \u0275fac=function(n){return new(n||r)(v(H),v(w),v(L))};static \u0275cmp=C({type:r,selectors:[["app-details-prestation"]],standalone:!1,decls:28,vars:10,consts:[[1,"pc-container"],[1,"pc-content"],[1,"page-header","mb-4"],[1,"page-block"],[1,"row","align-items-center"],[1,"col-md-12"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0"],[1,"breadcrumb-item"],[1,"text-decoration-none",3,"routerLink"],[1,"ti","ti-home","me-1"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-md-12","mt-3","d-flex","justify-content-between","align-items-center"],[1,"mb-0","fw-bold"],["class","btn btn-sm btn-primary me-2",3,"routerLink",4,"ngIf"],[1,"btn","btn-sm","btn-outline-secondary",3,"routerLink"],[1,"ti","ti-arrow-left","me-1"],["class","row",4,"ngIf"],[1,"btn","btn-sm","btn-primary","me-2",3,"routerLink"],[1,"ti","ti-edit","me-1"],[1,"row"],[1,"col-12"],[1,"card","shadow-sm"],[1,"card-body","p-5","text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3","mb-0"],[1,"card","shadow-sm","border-danger"],[1,"card-body","p-4","text-center"],[1,"text-danger","mb-3"],[1,"ti","ti-alert-circle",2,"font-size","3rem"],[1,"text-danger"],[1,"mb-0"],[1,"mt-3"],[1,"btn","btn-outline-primary","me-2",3,"click"],[1,"ti","ti-refresh","me-1"],[1,"btn","btn-outline-secondary",3,"routerLink"],[1,"ti","ti-list","me-1"],[1,"col-12","mb-4"],[1,"card","shadow-sm","h-100"],[1,"card-header","bg-primary","py-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bold","text-white","mb-0"],[1,"ti","ti-file-invoice","me-2"],[1,"badge","bg-light","text-primary","fs-6"],[1,"card-body","p-4"],[1,"row","mb-4"],[1,"col-sm-6","mb-3"],[1,"p-3","border","rounded","text-center","h-100","bg-light-primary"],[1,"text-primary","mb-2"],[1,"ti","ti-currency-franc","me-2"],[1,"fs-4","fw-bold","mb-0"],[1,"ti","ti-clock","me-2"],[1,"card","mb-4","border-0","bg-light-primary"],[1,"card-header","bg-primary","text-white"],[1,"ti","ti-notes","me-2"],[1,"card-body","p-3"],[1,"mb-0","fs-5"],[1,"card","border-0"],[1,"ti","ti-chart-bar","me-2"],[1,"row","g-3"],[1,"col-md-4"],[1,"card","bg-light-success","mb-0","h-100"],[1,"card-body","p-3","text-center"],[1,"text-success","mb-1"],[1,"card","bg-light-info","mb-0","h-100"],[1,"text-info","mb-1"],[1,"card","bg-light-warning","mb-0","h-100"],[1,"text-warning","mb-1"],[1,"card-footer","bg-light","p-4"],[1,"text-primary","mb-0"],[1,"fs-3","fw-bold","text-success","mb-0"]],template:function(n,a){n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"nav",6)(7,"ol",7)(8,"li",8)(9,"a",9),l(10,"i",10),i(11,"Tableau de Bord "),e()(),t(12,"li",8)(13,"a",9),i(14,"Prestations"),e()(),t(15,"li",11),i(16,"D\xE9tails"),e()()()(),t(17,"div",12)(18,"h2",13),i(19,"D\xE9tails de la Prestation"),e(),t(20,"div"),p(21,De,3,3,"a",14),t(22,"a",15),l(23,"i",16),i(24,"Retour "),e()()()()()(),p(25,Ae,9,0,"div",17)(26,Ne,17,3,"div",17)(27,je,72,16,"div",17),e()()),n&2&&(s(9),d("routerLink",g(7,Me)),s(4),d("routerLink",g(8,le)),s(8),d("ngIf",a.prestation==null?null:a.prestation.trackingId),s(),d("routerLink",g(9,le)),s(3),d("ngIf",a.loading),s(),d("ngIf",a.error&&!a.loading),s(),d("ngIf",a.prestation&&!a.loading&&!a.error))},dependencies:[I,F,B],encapsulation:2})};var V=ie(se());var K=class r{transform(o,n){return o?n?(n=n.toLowerCase(),o.filter(a=>Object.keys(a).some(m=>typeof a[m]=="object"||Array.isArray(a[m])?!1:a[m]?.toString().toLowerCase()?.includes(n)))):o:[]}static \u0275fac=function(n){return new(n||r)};static \u0275pipe=ge({name:"filter",type:r,pure:!0,standalone:!1})};var Ue=()=>["/dashboard"],Fe=r=>["/dashboard/prestations/details-prestation",r],Le=r=>["/dashboard/prestations/edit",r];function Be(r,o){r&1&&(t(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21)(5,"span",22),i(6,"Chargement..."),e()(),t(7,"p",23),i(8,"Chargement des prestations..."),e()()()()())}function Oe(r,o){if(r&1){let n=S();t(0,"div",17)(1,"div",18)(2,"div",24)(3,"div",25)(4,"div",26),l(5,"i",27),e(),t(6,"h4",28),i(7),e(),t(8,"p",29),i(9,"Veuillez r\xE9essayer ou contacter l'administrateur si le probl\xE8me persiste."),e(),t(10,"div",30)(11,"button",31),b("click",function(){_(n);let m=c();return E(m.refreshData())}),l(12,"i",32),i(13,"R\xE9essayer "),e()()()()()()}if(r&2){let n=c();s(7),x(n.error)}}function qe(r,o){if(r&1){let n=S();t(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",33),l(5,"i",34),e(),t(6,"h4"),i(7,"Aucune t\xE2che disponible"),e(),t(8,"p",35),i(9,"Vous n'avez pas encore cr\xE9\xE9 de t\xE2ches."),e(),t(10,"button",36),b("click",function(){_(n);let m=c();return E(m.addPrestation())}),l(11,"i",15),i(12,"Ajouter votre premi\xE8re t\xE2che "),e()()()()()}}function Ge(r,o){if(r&1){let n=S();t(0,"tr")(1,"td",56),i(2),e(),t(3,"td"),i(4),P(5,"slice"),e(),t(6,"td"),i(7),e(),t(8,"td"),i(9),P(10,"currency"),e(),t(11,"td",57)(12,"div",58)(13,"a",59),l(14,"i",60),e(),t(15,"a",61),l(16,"i",62),e(),t(17,"button",63),b("click",function(){let m=_(n).$implicit,f=c(2);return E(f.deletePrestation(m.trackingId))}),l(18,"i",64),e()()()()}if(r&2){let n=o.$implicit;s(2),x(n.designation),s(2),ne("",oe(5,7,n.description,0,50),"",n.description.length>50?"...":"",""),s(3),y("",n.duree," heures"),s(2),x(D(10,11,n.prixUnitaire,"XOF","symbol","1.0-0")),s(4),d("routerLink",k(16,Fe,n.trackingId)),s(2),d("routerLink",k(18,Le,n.trackingId))}}function ze(r,o){if(r&1){let n=S();t(0,"div",65)(1,"div",66)(2,"div",67)(3,"h5",68),l(4,"i",69),i(5),e()(),t(6,"div",54)(7,"div",35)(8,"p",70),i(9),P(10,"slice"),e(),t(11,"div",71)(12,"span",72),l(13,"i",73),i(14),e(),t(15,"span",74),l(16,"i",75),i(17),P(18,"currency"),e()()(),t(19,"div",76)(20,"a",77),l(21,"i",78),i(22,"D\xE9tails "),e(),t(23,"div")(24,"a",79),l(25,"i",62),e(),t(26,"button",80),b("click",function(){let m=_(n).$implicit,f=c(2);return E(f.deletePrestation(m.trackingId))}),l(27,"i",64),e()()()()()()}if(r&2){let n=o.$implicit;s(3),be("title",n.designation),s(2),y("",n.designation," "),s(4),ne("",oe(10,8,n.description,0,100),"",n.description.length>100?"...":"",""),s(5),y(" ",n.duree," heures "),s(3),y(" ",D(18,12,n.prixUnitaire,"XOF","symbol","1.0-0")," "),s(3),d("routerLink",k(17,Fe,n.trackingId)),s(4),d("routerLink",k(19,Le,n.trackingId))}}function $e(r,o){if(r&1){let n=S();t(0,"div",17)(1,"div",37)(2,"div",38)(3,"div",39)(4,"h5",29),l(5,"i",40),i(6),e(),t(7,"div",41)(8,"span",42),l(9,"i",43),e(),t(10,"input",44),_e("ngModelChange",function(m){_(n);let f=c();return he(f.searchTerm,m)||(f.searchTerm=m),E(m)}),e()()(),t(11,"div",45)(12,"div",46)(13,"table",47)(14,"thead")(15,"tr")(16,"th",48),i(17,"D\xE9signation"),e(),t(18,"th",49),i(19,"Description"),e(),t(20,"th",49),i(21,"Dur\xE9e"),e(),t(22,"th",49),i(23,"Prix Unitaire"),e(),t(24,"th",50),i(25,"Actions"),e()()(),t(26,"tbody"),p(27,Ge,19,20,"tr",51),P(28,"filter"),e()()()()()(),t(29,"div",18)(30,"div",38)(31,"div",52)(32,"h5",29),l(33,"i",53),i(34,"Vue en cartes"),e()(),t(35,"div",54)(36,"div",17),p(37,ze,28,21,"div",55),P(38,"filter"),e()()()()()}if(r&2){let n=c();s(6),y("Liste des prestations (",n.PrestationsResponse.length,")"),s(4),xe("ngModel",n.searchTerm),s(17),d("ngForOf",re(28,4,n.PrestationsResponse,n.searchTerm)),s(10),d("ngForOf",re(38,7,n.PrestationsResponse,n.searchTerm))}}var Q=class r{constructor(o,n,a){this.PrestationsService=o;this.router=n;this.messageService=a;this.getPrestations()}PrestationsResponse=[];loading=!0;error=null;searchTerm="";getPrestations(){this.loading=!0,this.error=null,this.PrestationsService.findByCreatedBy().subscribe(o=>{this.loading=!1,o?(console.log(o),this.PrestationsResponse=o):(console.log(o),this.PrestationsResponse=[])},o=>{this.loading=!1,this.error=o.message||"Une erreur est survenue lors du chargement des prestations",console.error("Erreur lors du chargement des prestations:",o)})}refreshData(){this.getPrestations(),this.messageService.add({severity:"info",summary:"Actualisation",detail:"Liste des prestations actualis\xE9e",life:3e3})}addPrestation(){console.log("ici"),this.router.navigate(["dashboard/prestations/add-prestation"])}editPrestation(o){this.router.navigate([`dashboard/prestations/edit-prestation/${o}`])}detailPrestation(o){this.router.navigate([`dashboard/prestations/details-prestation/${o}`])}deletePrestation(o){V.default.fire({title:"\xCAtes-vous s\xFBr ?",text:"Vous voulez vraiment supprimer ce Prestation !",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Annuler",confirmButtonText:"Oui, le supprimer !"}).then(n=>{n.isConfirmed&&this.PrestationsService.deletePrestation(o).subscribe({next:a=>{a.message==="Prestation deleted successfully"?(this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Prestation supprim\xE9 avec succ\xE8s"}),this.PrestationsResponse=this.PrestationsResponse.filter(m=>m.trackingId!==o),V.default.fire({title:"Supprim\xE9 !",text:"Le Prestation a bien \xE9t\xE9 supprim\xE9.",icon:"success"})):V.default.fire({title:"Erreur",text:"Impossible de supprimer le Prestation pour l'instant, veuillez r\xE9essayer plus tard.",icon:"error"})},error:a=>{console.error("Erreur lors de la suppression du Prestation :",a),V.default.fire({title:"Erreur",text:"Une erreur est survenue lors de la suppression du Prestation.",icon:"error"})}})})}static \u0275fac=function(n){return new(n||r)(v(L),v(w),v(A))};static \u0275cmp=C({type:r,selectors:[["app-list-prestation"]],standalone:!1,decls:25,vars:6,consts:[[1,"pc-container"],[1,"pc-content"],[1,"page-header","mb-4"],[1,"page-block"],[1,"row","align-items-center"],[1,"col-md-12"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0"],[1,"breadcrumb-item"],[1,"text-decoration-none",3,"routerLink"],[1,"ti","ti-home","me-1"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-md-12","mt-3","d-flex","justify-content-between","align-items-center"],[1,"mb-0","fw-bold"],[1,"btn","btn-primary","d-flex","align-items-center",3,"click"],[1,"ti","ti-plus","me-2"],["class","row",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"card","shadow-sm"],[1,"card-body","p-5","text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3","mb-0"],[1,"card","shadow-sm","border-danger"],[1,"card-body","p-4","text-center"],[1,"text-danger","mb-3"],[1,"ti","ti-alert-circle",2,"font-size","3rem"],[1,"text-danger"],[1,"mb-0"],[1,"mt-3"],[1,"btn","btn-outline-primary",3,"click"],[1,"ti","ti-refresh","me-1"],[1,"text-muted","mb-3"],[1,"ti","ti-file-off",2,"font-size","3rem"],[1,"mb-3"],[1,"btn","btn-primary",3,"click"],[1,"col-12","mb-4"],[1,"card"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center","py-3"],[1,"ti","ti-list","me-2"],[1,"input-group",2,"max-width","300px"],[1,"input-group-text"],[1,"ti","ti-search"],["type","text","placeholder","Rechercher...",1,"form-control",3,"ngModelChange","ngModel"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-hover","table-striped","mb-0"],["scope","col",1,"ps-3"],["scope","col"],["scope","col",1,"text-end","pe-3"],[4,"ngFor","ngForOf"],[1,"card-header","bg-light","py-3"],[1,"ti","ti-cards","me-2"],[1,"card-body"],["class","col-md-6 col-lg-4 mb-4",4,"ngFor","ngForOf"],[1,"ps-3","fw-medium"],[1,"text-end","pe-3"],[1,"d-flex","justify-content-end","gap-2"],["title","D\xE9tails",1,"btn","btn-sm","btn-light-primary",3,"routerLink"],[1,"ti","ti-eye"],["title","Modifier",1,"btn","btn-sm","btn-light-success",3,"routerLink"],[1,"ti","ti-edit"],["title","Supprimer",1,"btn","btn-sm","btn-light-danger",3,"click"],[1,"ti","ti-trash"],[1,"col-md-6","col-lg-4","mb-4"],[1,"card","shadow-sm","h-100"],[1,"card-header","bg-light-primary","py-3"],[1,"card-title","mb-0","text-primary","text-truncate",3,"title"],[1,"ti","ti-file-invoice","me-2"],[1,"card-text","text-muted","mb-3",2,"min-height","48px"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"badge","bg-light-primary","text-primary","p-2"],[1,"ti","ti-clock","me-1"],[1,"badge","bg-light-success","text-success","p-2"],[1,"ti","ti-currency-franc","me-1"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn","btn-sm","btn-primary",3,"routerLink"],[1,"ti","ti-eye","me-1"],[1,"btn","btn-sm","btn-light-success","me-1",3,"routerLink"],[1,"btn","btn-sm","btn-light-danger",3,"click"]],template:function(n,a){n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"nav",6)(7,"ol",7)(8,"li",8)(9,"a",9),l(10,"i",10),i(11,"Tableau de Bord "),e()(),t(12,"li",11),i(13,"T\xE2ches"),e()()()(),t(14,"div",12)(15,"h2",13),i(16,"Gestion des t\xE2ches"),e(),t(17,"div")(18,"button",14),b("click",function(){return a.addPrestation()}),l(19,"i",15),i(20,"Ajouter une t\xE2che "),e()()()()()(),p(21,Be,9,0,"div",16)(22,Oe,14,1,"div",16)(23,qe,13,0,"div",16)(24,$e,39,10,"div",16),e()()),n&2&&(s(9),d("routerLink",g(5,Ue)),s(12),d("ngIf",a.loading),s(),d("ngIf",a.error&&!a.loading),s(),d("ngIf",!a.loading&&!a.error&&(!a.PrestationsResponse||a.PrestationsResponse.length===0)),s(),d("ngIf",!a.loading&&!a.error&&a.PrestationsResponse&&a.PrestationsResponse.length>0))},dependencies:[Ee,I,F,N,j,ye,Se,B,K],encapsulation:2})};var ue=ie(se());var Xe=()=>["/dashboard"],ke=()=>["/dashboard/prestations"];function We(r,o){r&1&&(t(0,"div",50),i(1," La d\xE9signation est requise "),e())}function He(r,o){r&1&&(t(0,"div",50),i(1," La description est requise "),e())}function Je(r,o){r&1&&(t(0,"div",50),i(1," La dur\xE9e est requise "),e())}function Ke(r,o){r&1&&(t(0,"span"),i(1,"Le prix unitaire est requis"),e())}function Qe(r,o){r&1&&(t(0,"span"),i(1,"Le prix doit \xEAtre sup\xE9rieur \xE0 0"),e())}function Ye(r,o){if(r&1&&(t(0,"div",50),p(1,Ke,2,0,"span",51)(2,Qe,2,0,"span",51),e()),r&2){let n,a,m=c();s(),d("ngIf",(n=m.prestationForm.get("prixUnitaire"))==null||n.errors==null?null:n.errors.required),s(),d("ngIf",(a=m.prestationForm.get("prixUnitaire"))==null||a.errors==null?null:a.errors.min)}}function Ze(r,o){r&1&&(t(0,"div",52)(1,"span",53),i(2,"Chargement..."),e()())}function et(r,o){if(r&1&&(t(0,"div",54)(1,"div",53),i(2),e()()),r&2){let n=c();s(2),x(n.errorMessage)}}var Y=class r{constructor(o,n,a,m){this.formBuilder=o;this.prestationsService=n;this.router=a;this.messageService=m}prestationForm;isLoading=!1;errorMessage="";ngOnInit(){this.initForm()}initForm(){this.prestationForm=this.formBuilder.group({designation:["",h.required],description:["",h.required],prixUnitaire:["",[h.pattern("^[0-9]+$")]],duree:["",[h.required,h.pattern("^[0-9]+$")]]})}onSubmit(){if(this.prestationForm.invalid){Object.keys(this.prestationForm.controls).forEach(a=>{this.prestationForm.get(a)?.markAsTouched()});return}this.isLoading=!0,this.errorMessage="";let o=this.prestationForm.value,n={designation:o.designation,description:o.description,duree:o.duree,prixUnitaire:o.prixUnitaire?o.prixUnitaire:void 0,prixTotal:o.prixTotal?o.prixTotal:void 0};this.prestationsService.createPrestation(n).subscribe({next:()=>{this.isLoading=!1,ue.default.fire("Ajout r\xE9ussi","La prestation a \xE9t\xE9 ajout\xE9e avec succ\xE8s","success"),this.messageService.add({severity:"success",summary:"Ajout r\xE9ussi",detail:"Prestation ajout\xE9e"}),this.router.navigate(["/dashboard/prestations"])},error:a=>{this.isLoading=!1,ue.default.fire("Erreur","Une erreur s'est produite","error"),console.error("Erreur API :",a),this.messageService.add({severity:"error",summary:"Erreur",detail:this.errorMessage})}})}static \u0275fac=function(n){return new(n||r)(v(W),v(L),v(w),v(A))};static \u0275cmp=C({type:r,selectors:[["app-add-prestation"]],standalone:!1,decls:94,vars:14,consts:[[1,"pc-container"],[1,"pc-content"],[1,"page-header","mb-4"],[1,"page-block"],[1,"row","align-items-center"],[1,"col-md-12"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0"],[1,"breadcrumb-item"],[1,"text-decoration-none",3,"routerLink"],[1,"ti","ti-home","me-1"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-md-12","mt-3","d-flex","justify-content-between","align-items-center"],[1,"mb-0","fw-bold"],[1,"btn","btn-sm","btn-outline-secondary",3,"routerLink"],[1,"ti","ti-arrow-left","me-1"],[1,"row"],[1,"col-12"],[1,"card","shadow-sm"],[1,"card-body","p-4"],[3,"ngSubmit","formGroup"],[1,"row","g-3","mb-4"],[1,"col-md-6"],[1,"card","border-0","bg-light-primary"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"ti","ti-info-circle","me-2"],[1,"card-body","p-3"],[1,"mb-3"],["for","designation",1,"form-label"],[1,"text-danger"],[1,"input-group"],[1,"input-group-text"],[1,"ti","ti-tag"],["id","designation","type","text","formControlName","designation","placeholder","Nom de la prestation",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["for","description",1,"form-label"],[1,"ti","ti-notes"],["id","description","formControlName","description","placeholder","Description d\xE9taill\xE9e de la prestation","rows","3",1,"form-control"],[1,"ti","ti-calculator","me-2"],["for","duree",1,"form-label"],[1,"ti","ti-clock"],["id","duree","type","text","formControlName","duree","placeholder","Dur\xE9e en heures",1,"form-control"],["for","prixUnitaire",1,"form-label"],[1,"ti","ti-currency-franc"],["id","prixUnitaire","type","number","formControlName","prixUnitaire","placeholder","Prix unitaire",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100","mb-3",3,"disabled"],[1,"ph-duotone","ph-user-plus","me-2"],["class","alert alert-info d-flex align-items-center mt-3",4,"ngIf"],["class","alert alert-danger d-flex align-items-center mt-3",4,"ngIf"],[1,"text-danger","small","mt-1"],[4,"ngIf"],[1,"alert","alert-info","d-flex","align-items-center","mt-3"],[1,"ms-2"],[1,"alert","alert-danger","d-flex","align-items-center","mt-3"]],template:function(n,a){if(n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"nav",6)(7,"ol",7)(8,"li",8)(9,"a",9),l(10,"i",10),i(11,"Tableau de Bord "),e()(),t(12,"li",8)(13,"a",9),i(14,"T\xE2ches"),e()(),t(15,"li",11),i(16,"Ajouter"),e()()()(),t(17,"div",12)(18,"h2",13),i(19,"Ajouter une t\xE2che"),e(),t(20,"div")(21,"a",14),l(22,"i",15),i(23,"Retour "),e()()()()()(),t(24,"div",16)(25,"div",17)(26,"div",18)(27,"div",19)(28,"form",20),b("ngSubmit",function(){return a.onSubmit()}),t(29,"div",21)(30,"div",22)(31,"div",23)(32,"div",24)(33,"h5",25),l(34,"i",26),i(35,"Informations de base"),e()(),t(36,"div",27)(37,"div",28)(38,"label",29),i(39,"D\xE9signation "),t(40,"span",30),i(41,"*"),e()(),t(42,"div",31)(43,"span",32),l(44,"i",33),e(),l(45,"input",34),e(),p(46,We,2,0,"div",35),e(),t(47,"div",28)(48,"label",36),i(49,"Description "),t(50,"span",30),i(51,"*"),e()(),t(52,"div",31)(53,"span",32),l(54,"i",37),e(),l(55,"textarea",38),e(),p(56,He,2,0,"div",35),e()()()(),t(57,"div",22)(58,"div",23)(59,"div",24)(60,"h5",25),l(61,"i",39),i(62,"Informations tarifaires"),e()(),t(63,"div",27)(64,"div",28)(65,"label",40),i(66,"Dur\xE9e "),t(67,"span",30),i(68,"*"),e()(),t(69,"div",31)(70,"span",32),l(71,"i",41),e(),l(72,"input",42),t(73,"span",32),i(74,"heures"),e()(),p(75,Je,2,0,"div",35),e(),t(76,"div",28)(77,"label",43),i(78,"Prix Unitaire "),t(79,"span",30),i(80,"*"),e()(),t(81,"div",31)(82,"span",32),l(83,"i",44),e(),l(84,"input",45),t(85,"span",32),i(86,"XOF"),e()(),p(87,Ye,3,2,"div",35),e()()()()(),t(88,"button",46),l(89,"i",47),t(90,"span"),i(91,"Cr\xE9er la t\xE2che"),e()(),p(92,Ze,3,0,"div",48)(93,et,3,1,"div",49),e()()()()()()()),n&2){let m,f,u,U;s(9),d("routerLink",g(11,Xe)),s(4),d("routerLink",g(12,ke)),s(8),d("routerLink",g(13,ke)),s(7),d("formGroup",a.prestationForm),s(18),d("ngIf",((m=a.prestationForm.get("designation"))==null?null:m.invalid)&&((m=a.prestationForm.get("designation"))==null?null:m.touched)),s(10),d("ngIf",((f=a.prestationForm.get("description"))==null?null:f.invalid)&&((f=a.prestationForm.get("description"))==null?null:f.touched)),s(19),d("ngIf",((u=a.prestationForm.get("duree"))==null?null:u.invalid)&&((u=a.prestationForm.get("duree"))==null?null:u.touched)),s(12),d("ngIf",((U=a.prestationForm.get("prixUnitaire"))==null?null:U.invalid)&&((U=a.prestationForm.get("prixUnitaire"))==null?null:U.touched)),s(),d("disabled",a.prestationForm.invalid),s(4),d("ngIf",a.isLoading),s(),d("ngIf",a.errorMessage)}},dependencies:[I,F,G,N,z,j,q,$,X],encapsulation:2})};var ve=ie(se());var tt=()=>["/dashboard"],fe=()=>["/dashboard/prestations"];function it(r,o){r&1&&(t(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21)(5,"span",22),i(6,"Chargement..."),e()(),t(7,"p",23),i(8,"Chargement des donn\xE9es de la prestation..."),e()()()()())}function nt(r,o){if(r&1&&(t(0,"div",17)(1,"div",18)(2,"div",24)(3,"div",25)(4,"div",26),l(5,"i",27),e(),t(6,"h4",28),i(7),e(),t(8,"p",29),i(9,"Veuillez r\xE9essayer ou contacter l'administrateur si le probl\xE8me persiste."),e(),t(10,"div",30)(11,"a",31),l(12,"i",32),i(13,"Liste des prestations "),e()()()()()()),r&2){let n=c();s(7),x(n.errorMessage),s(4),d("routerLink",g(2,fe))}}function rt(r,o){r&1&&(t(0,"div",64),i(1," La d\xE9signation est requise "),e())}function ot(r,o){r&1&&(t(0,"div",64),i(1," La description est requise "),e())}function at(r,o){r&1&&(t(0,"div",64),i(1," La dur\xE9e est requise "),e())}function st(r,o){r&1&&(t(0,"span"),i(1,"Le prix unitaire est requis"),e())}function lt(r,o){r&1&&(t(0,"span"),i(1,"Le prix doit \xEAtre sup\xE9rieur \xE0 0"),e())}function dt(r,o){if(r&1&&(t(0,"div",64),p(1,st,2,0,"span",61)(2,lt,2,0,"span",61),e()),r&2){let n,a,m=c(2);s(),d("ngIf",(n=m.prestationForm.get("prixUnitaire"))==null||n.errors==null?null:n.errors.required),s(),d("ngIf",(a=m.prestationForm.get("prixUnitaire"))==null||a.errors==null?null:a.errors.min)}}function mt(r,o){r&1&&(t(0,"span"),i(1,"Enregistrer les modifications"),e())}function pt(r,o){r&1&&(t(0,"span"),i(1,"Mise \xE0 jour en cours..."),e())}function ct(r,o){if(r&1){let n=S();t(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",33)(4,"form",34),b("ngSubmit",function(){_(n);let m=c();return E(m.onUpdate())}),t(5,"div",35)(6,"div",36)(7,"div",37)(8,"div",38)(9,"h5",29),l(10,"i",39),i(11,"Informations de base"),e()(),t(12,"div",40)(13,"div",41)(14,"label",42),i(15,"D\xE9signation "),t(16,"span",28),i(17,"*"),e()(),t(18,"div",43)(19,"span",44),l(20,"i",45),e(),l(21,"input",46),e(),p(22,rt,2,0,"div",47),e(),t(23,"div",41)(24,"label",48),i(25,"Description "),t(26,"span",28),i(27,"*"),e()(),t(28,"div",43)(29,"span",44),l(30,"i",49),e(),l(31,"textarea",50),e(),p(32,ot,2,0,"div",47),e()()()(),t(33,"div",36)(34,"div",37)(35,"div",38)(36,"h5",29),l(37,"i",51),i(38,"Informations tarifaires"),e()(),t(39,"div",40)(40,"div",41)(41,"label",52),i(42,"Dur\xE9e "),t(43,"span",28),i(44,"*"),e()(),t(45,"div",43)(46,"span",44),l(47,"i",53),e(),l(48,"input",54),t(49,"span",44),i(50,"heures"),e()(),p(51,at,2,0,"div",47),e(),t(52,"div",41)(53,"label",55),i(54,"Prix Unitaire "),t(55,"span",28),i(56,"*"),e()(),t(57,"div",43)(58,"span",44),l(59,"i",56),e(),l(60,"input",57),t(61,"span",44),i(62,"XOF"),e()(),p(63,dt,3,2,"div",47),e()()()()(),t(64,"div",17)(65,"div",58)(66,"button",59),l(67,"i",60),p(68,mt,2,0,"span",61)(69,pt,2,0,"span",61),e(),t(70,"button",62),b("click",function(){_(n);let m=c();return E(m.onCancel())}),l(71,"i",63),i(72,"Annuler "),e()()()()()()()()}if(r&2){let n,a,m,f,u=c();s(4),d("formGroup",u.prestationForm),s(18),d("ngIf",((n=u.prestationForm.get("designation"))==null?null:n.invalid)&&((n=u.prestationForm.get("designation"))==null?null:n.touched)),s(10),d("ngIf",((a=u.prestationForm.get("description"))==null?null:a.invalid)&&((a=u.prestationForm.get("description"))==null?null:a.touched)),s(19),d("ngIf",((m=u.prestationForm.get("duree"))==null?null:m.invalid)&&((m=u.prestationForm.get("duree"))==null?null:m.touched)),s(12),d("ngIf",((f=u.prestationForm.get("prixUnitaire"))==null?null:f.invalid)&&((f=u.prestationForm.get("prixUnitaire"))==null?null:f.touched)),s(3),d("disabled",u.prestationForm.invalid||u.isSubmitting),s(2),d("ngIf",!u.isSubmitting),s(),d("ngIf",u.isSubmitting),s(),d("disabled",u.isSubmitting)}}var Z=class r{constructor(o,n,a,m,f){this.route=o;this.router=n;this.fb=a;this.prestationsService=m;this.messageService=f}prestationForm;prestationId;isLoading=!1;errorMessage="";ngOnInit(){this.prestationId=this.route.snapshot.paramMap.get("id"),this.prestationForm=this.fb.group({designation:["",h.required],description:["",h.required],prixUnitaire:["",[h.required,h.pattern("^[0-9]+$")]],duree:["",[h.required,h.pattern("^[0-9]+$")]]}),this.prestationsService.getPrestationById(this.prestationId).subscribe(o=>{o&&(console.log(o),this.prestationForm.patchValue(o))})}onUpdate(){if(this.prestationForm.invalid)return;this.isLoading=!0;let o=this.prestationForm.value;o.prixUnitaire=this.prestationForm.get("prixUnitaire")?.value,this.prestationsService.updatePrestation(this.prestationId,o).subscribe({next:()=>{this.isLoading=!1,ve.default.fire({title:"Modification r\xE9ussie",text:"La prestation a \xE9t\xE9 modifi\xE9e avec succ\xE8s",icon:"success",draggable:!0}),this.messageService.add({severity:"success",summary:"Modification r\xE9ussie",detail:"La prestation a \xE9t\xE9 modifi\xE9e avec succ\xE8s"}),this.router.navigate(["/dashboard/prestations"])},error:n=>{this.isLoading=!1,ve.default.fire({title:"Erreur",text:"Une erreur s'est produite lors de la modification de la prestation",icon:"error"}),console.error("Erreur API :",n),this.messageService.add({severity:"error",summary:"Erreur",detail:"Une erreur s'est produite"})}})}static \u0275fac=function(n){return new(n||r)(v(H),v(w),v(W),v(L),v(A))};static \u0275cmp=C({type:r,selectors:[["app-edit-prestation"]],standalone:!1,decls:27,vars:9,consts:[[1,"pc-container"],[1,"pc-content"],[1,"page-header","mb-4"],[1,"page-block"],[1,"row","align-items-center"],[1,"col-md-12"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0"],[1,"breadcrumb-item"],[1,"text-decoration-none",3,"routerLink"],[1,"ti","ti-home","me-1"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-md-12","mt-3","d-flex","justify-content-between","align-items-center"],[1,"mb-0","fw-bold"],[1,"btn","btn-sm","btn-outline-secondary",3,"routerLink"],[1,"ti","ti-arrow-left","me-1"],["class","row",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"card","shadow-sm"],[1,"card-body","p-5","text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3","mb-0"],[1,"card","shadow-sm","border-danger"],[1,"card-body","p-4","text-center"],[1,"text-danger","mb-3"],[1,"ti","ti-alert-circle",2,"font-size","3rem"],[1,"text-danger"],[1,"mb-0"],[1,"mt-3"],[1,"btn","btn-outline-secondary",3,"routerLink"],[1,"ti","ti-list","me-1"],[1,"card-body","p-4"],[3,"ngSubmit","formGroup"],[1,"row","g-3","mb-4"],[1,"col-md-6"],[1,"card","border-0","bg-light-primary"],[1,"card-header","bg-primary","text-white"],[1,"ti","ti-info-circle","me-2"],[1,"card-body","p-3"],[1,"mb-3"],["for","designation",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"ti","ti-tag"],["id","designation","type","text","formControlName","designation","placeholder","Nom de la prestation",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["for","description",1,"form-label"],[1,"ti","ti-notes"],["id","description","formControlName","description","placeholder","Description d\xE9taill\xE9e de la prestation","rows","3",1,"form-control"],[1,"ti","ti-calculator","me-2"],["for","duree",1,"form-label"],[1,"ti","ti-clock"],["id","duree","type","text","formControlName","duree","placeholder","Dur\xE9e en heures",1,"form-control"],["for","prixUnitaire",1,"form-label"],[1,"ti","ti-currency-franc"],["id","prixUnitaire","type","number","formControlName","prixUnitaire","placeholder","Prix unitaire",1,"form-control"],[1,"col-12","d-flex","gap-2"],["type","submit",1,"btn","btn-primary","flex-grow-1",3,"disabled"],[1,"ti","ti-device-floppy","me-2"],[4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"ti","ti-x","me-2"],[1,"text-danger","small","mt-1"]],template:function(n,a){n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"nav",6)(7,"ol",7)(8,"li",8)(9,"a",9),l(10,"i",10),i(11,"Tableau de Bord "),e()(),t(12,"li",8)(13,"a",9),i(14,"Prestations"),e()(),t(15,"li",11),i(16,"Modifier"),e()()()(),t(17,"div",12)(18,"h2",13),i(19,"Modifier la Prestation"),e(),t(20,"div")(21,"a",14),l(22,"i",15),i(23,"Retour "),e()()()()()(),p(24,it,9,0,"div",16)(25,nt,14,3,"div",16)(26,ct,73,9,"div",16),e()()),n&2&&(s(9),d("routerLink",g(6,tt)),s(4),d("routerLink",g(7,fe)),s(8),d("routerLink",g(8,fe)),s(3),d("ngIf",a.isLoading),s(),d("ngIf",a.errorMessage&&!a.isLoading),s(),d("ngIf",!a.isLoading&&!a.errorMessage))},dependencies:[I,F,G,N,z,j,q,$,X],encapsulation:2})};var ut=[{path:"",component:Q},{path:"add-prestation",component:Y},{path:"edit/:id",component:Z},{path:"details-prestation/:id",component:J}],ee=class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=R({type:r});static \u0275inj=M({imports:[ae.forChild(ut),ae]})};var te=class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=R({type:r});static \u0275inj=M({imports:[O]})};var Te=class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=R({type:r});static \u0275inj=M({imports:[O,ee,Ce,Pe,te]})};export{Te as PrestationsModule};
